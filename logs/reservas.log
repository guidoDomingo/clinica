AJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-04"}AJAX buscarReservas (procesado): Fecha=2025-06-04, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-04"}AJAX buscarReservas (procesado): Fecha=2025-06-04, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-04"}AJAX buscarReservas (procesado): Fecha=2025-06-04, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-04"}AJAX buscarReservas (procesado): Fecha=2025-06-04, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-04"}AJAX buscarReservas (procesado): Fecha=2025-06-04, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-04"}AJAX buscarReservas (procesado): Fecha=2025-06-04, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-04, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX guardarReserva: Datos recibidos = {"doctor_id":13,"servicio_id":2,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"21:30:00","hora_fin":"22:00:00","seguro_id":"2","observaciones":"","agenda_id":27}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":2,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"21:30:00","hora_fin":"22:00:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"agenda_id":27,"seguro_id":"2"}Intentando guardar reserva: {"servicio_id":2,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"21:30:00","hora_fin":"22:00:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"agenda_id":27,"seguro_id":"2"}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":2,"doctor_id":"13","paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"21:30:00","hora_fin":"22:00:00","agenda_id":27,"tarifa_id":null,"seguro_id":"2"}Reserva creada con ID: 19AJAX guardarReserva: Reserva creada con ID 19AJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 3 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Fecha=2025-06-03, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX obtenerReservas: Se encontraron 3 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-03"}AJAX buscarReservas (procesado): Fecha=2025-06-03, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-03","paciente":"ma"}AJAX buscarReservas (procesado): Fecha=2025-06-03, DoctorID=null (tipo: NULL), Estado=null, Paciente=mactrBuscarReservas: Llamada con Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=mactrBuscarReservas: Filtrando específicamente por paciente=mamdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=mamdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin AND (rp2.first_name ILIKE :nombre_paciente 
                        OR rp2.last_name ILIKE :nombre_paciente 
                        OR (rp2.first_name || ' ' || rp2.last_name) ILIKE :nombre_paciente) ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}AJAX buscarReservas: POST={"action":"buscarReservas","fecha":"2025-06-03"}AJAX buscarReservas (procesado): Fecha=2025-06-03, DoctorID=null (tipo: NULL), Estado=null, Paciente=nullctrBuscarReservas: Llamada con Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: Fecha=2025-06-03, DoctorID=null, Estado=null, Paciente=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                s.sala_nombre,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion,
                rs.serv_monto
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            inner join agendas_detalle ad on sr.agenda_id = ad.detalle_id 
            inner join salas s on s.sala_id = ad.sala_id 
            WHERE 1=1 AND sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.fecha_reserva DESC, sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":17,"servicio_id":1,"doctor_id":13,"paciente_id":51,"fecha_reserva":"2025-06-03","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-06-02 20:01:51.447253","updated_at":null,"agenda_id":21,"sala_id":null,"sala_nombre":"Sala 1","tarifa_id":null,"doctor":"Antonio - Galeano","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica","serv_monto":"150000.00"}