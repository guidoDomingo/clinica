AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":2,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"11:30:00","hora_fin":"12:00:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"11:30:00","hora_fin":"12:00:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"11:30:00","hora_fin":"12:00:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Reserva rechazada: Ya existe una reserva en este horario para este médicoAJAX guardarReserva: No se pudo guardar la reserva (resultado=false)AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":2,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":2,"doctor_id":"14","paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","agenda_id":null,"tarifa_id":null}Reserva creada con ID: 3AJAX guardarReserva: Reserva creada con ID 3mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    r.sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(p_paciente.first_name, '') || ' ' || COALESCE(p_paciente.last_name, '') as paciente_nombre,
                    COALESCE(p_doctor.first_name, '') || ' ' || COALESCE(p_doctor.last_name, '') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    rh_doctors d ON r.doctor_id = d.doctor_id
                LEFT JOIN 
                    rh_person p_doctor ON d.person_id = p_doctor.person_id
                LEFT JOIN 
                    pacientes pac ON r.paciente_id = pac.paciente_id
                LEFT JOIN 
                    rh_person p_paciente ON pac.person_id = p_paciente.person_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "servicios_medicos" does not exist
LINE 20:                     servicios_medicos sm ON r.servicio_id = ...
                             ^mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=14, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             AND r.doctor_id = :doctor_id ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":2,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":2,"doctor_id":"14","paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","agenda_id":null,"tarifa_id":null}Reserva creada con ID: 4AJAX guardarReserva: Reserva creada con ID 4AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechamdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^mdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=
                WITH paciente_info AS (
                    -- Obtener información de pacientes con person_id
                    SELECT p.paciente_id, 
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_paciente
                    FROM pacientes p
                    LEFT JOIN rh_person rp ON p.person_id = rp.person_id
                    WHERE p.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de pacientes sin person_id
                    SELECT p.paciente_id,
                        COALESCE(p.nombre, '') as nombre_paciente
                    FROM pacientes p
                    WHERE p.person_id IS NULL AND p.nombre IS NOT NULL
                ),
                doctor_info AS (
                    -- Obtener información de doctores con person_id
                    SELECT d.doctor_id,
                        COALESCE(rp.first_name, '') || ' ' || COALESCE(rp.last_name, '') as nombre_doctor
                    FROM rh_doctors d
                    LEFT JOIN rh_person rp ON d.person_id = rp.person_id
                    WHERE d.person_id IS NOT NULL
                    
                    UNION ALL
                    
                    -- Obtener información de doctores sin person_id
                    SELECT d.doctor_id,
                        COALESCE(d.nombre, '') as nombre_doctor
                    FROM rh_doctors d
                    WHERE d.person_id IS NULL AND d.nombre IS NOT NULL
                )
                SELECT 
                    r.reserva_id,
                    r.servicio_id,
                    r.doctor_id,
                    r.paciente_id,
                    r.fecha_reserva,
                    r.hora_inicio,
                    r.hora_fin,
                    r.observaciones,
                    r.reserva_estado as estado,
                    COALESCE(r.sala_id, 0) as sala_id,
                    COALESCE(sm.servicio_nombre, 'Servicio no especificado') as servicio_nombre,
                    COALESCE(pi.nombre_paciente, 'Paciente no especificado') as paciente_nombre,
                    COALESCE(di.nombre_doctor, 'Doctor no especificado') as doctor_nombre,
                    COALESCE(s.sala_nombre, 'Sin sala') as sala_nombre,
                    r.agenda_id,
                    r.tarifa_id,
                    r.business_id,
                    r.created_at,
                    r.updated_at
                FROM 
                    servicios_reservas r
                LEFT JOIN 
                    servicios_medicos sm ON r.servicio_id = sm.servicio_id
                LEFT JOIN 
                    paciente_info pi ON r.paciente_id = pi.paciente_id
                LEFT JOIN 
                    doctor_info di ON r.doctor_id = di.doctor_id
                LEFT JOIN 
                    salas s ON r.sala_id = s.sala_id
                WHERE 
                    r.fecha_reserva = :fecha
             ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 6:                     FROM pacientes p
                                 ^mdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                    r.*,
                    r.reserva_estado as estado,
                    d.doctor_id as doc_id,
                    CASE 
                        WHEN d.person_id IS NOT NULL THEN 
                            (SELECT COALESCE(first_name, '') || ' ' || COALESCE(last_name, '') 
                             FROM rh_person WHERE person_id = d.person_id)
                        ELSE COALESCE(d.nombre, 'Sin nombre')
                    END as doctor_nombre,
                    p.paciente_id as pac_id,
                    CASE 
                        WHEN p.person_id IS NOT NULL THEN 
                            (SELECT COALESCE(first_name, '') || ' ' || COALESCE(last_name, '') 
                             FROM rh_person WHERE person_id = p.person_id)
                        ELSE COALESCE(p.nombre, 'Sin nombre')
                    END as paciente_nombre
                FROM servicios_reservas r
                LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
                LEFT JOIN pacientes p ON r.paciente_id = p.paciente_id
                WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 20:                 LEFT JOIN pacientes p ON r.paciente_id = p.p...
                                   ^mdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                    r.*,
                    r.reserva_estado as estado,
                    d.doctor_id as doc_id,
                    CASE 
                        WHEN d.person_id IS NOT NULL THEN 
                            (SELECT COALESCE(first_name, '') || ' ' || COALESCE(last_name, '') 
                             FROM rh_person WHERE person_id = d.person_id)
                        ELSE COALESCE(d.nombre, 'Sin nombre')
                    END as doctor_nombre,
                    p.paciente_id as pac_id,
                    CASE 
                        WHEN p.person_id IS NOT NULL THEN 
                            (SELECT COALESCE(first_name, '') || ' ' || COALESCE(last_name, '') 
                             FROM rh_person WHERE person_id = p.person_id)
                        ELSE COALESCE(p.nombre, 'Sin nombre')
                    END as paciente_nombre
                FROM servicios_reservas r
                LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
                LEFT JOIN pacientes p ON r.paciente_id = p.paciente_id
                WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "pacientes" does not exist
LINE 20:                 LEFT JOIN pacientes p ON r.paciente_id = p.p...
                                   ^AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.reserva_estado as estado,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                'Doctor ' || r.doctor_id as doctor_nombre,
                'Paciente ' || r.paciente_id as paciente_nombre,
                'Servicio ' || r.servicio_id as servicio_nombre
            FROM servicios_reservas r
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 1 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor_nombre":"Doctor 14","paciente_nombre":"Paciente 11","servicio_nombre":"Servicio 2"}AJAX obtenerReservas: Se encontraron 1 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor_nombre":"Doctor 14","paciente_nombre":"Paciente 11","servicio_nombre":"Servicio 2"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":3,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"11:00:00","hora_fin":"11:30:00","observaciones":"prueba"}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":3,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"11:00:00","hora_fin":"11:30:00","observaciones":"prueba","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":3,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"11:00:00","hora_fin":"11:30:00","observaciones":"prueba","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":3,"doctor_id":"14","paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"11:00:00","hora_fin":"11:30:00","agenda_id":null,"tarifa_id":null}Reserva creada con ID: 5AJAX guardarReserva: Reserva creada con ID 5AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.reserva_estado as estado,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                'Doctor ' || r.doctor_id as doctor_nombre,
                'Paciente ' || r.paciente_id as paciente_nombre,
                'Servicio ' || r.servicio_id as servicio_nombre
            FROM servicios_reservas r
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor_nombre":"Doctor 14","paciente_nombre":"Paciente 11","servicio_nombre":"Servicio 2"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor_nombre":"Doctor 14","paciente_nombre":"Paciente 11","servicio_nombre":"Servicio 2"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.reserva_estado as estado,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                -- Información del doctor usando person_id de la tabla rh_doctors
                COALESCE(doc_person.first_name || ' ' || doc_person.last_name, 'Doctor ' || r.doctor_id) as doctor_nombre,
                -- Información del paciente directamente de rh_person
                COALESCE(pac_person.first_name || ' ' || pac_person.last_name, 'Paciente ' || r.paciente_id) as paciente_nombre,
                -- Información del servicio desde rs_servicios si existe
                COALESCE(s.nombre, 'Servicio ' || r.servicio_id) as servicio_nombre
            FROM servicios_reservas r
            -- Join para obtener información del doctor
            LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
            LEFT JOIN rh_person doc_person ON d.person_id = doc_person.person_id
            -- Join para obtener información del paciente directamente de rh_person
            LEFT JOIN rh_person pac_person ON r.paciente_id = pac_person.person_id
            -- Join para obtener información del servicio (usando rs_servicios en lugar de servicios_medicos)
            LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio_id
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42703]: Undefined column: 7 ERROR:  column s.servicio_id does not exist
LINE 30: ...      LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio...
                                                              ^
HINT:  Perhaps you meant to reference the column "r.servicio_id".AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Verificación directa - Hay 2 reservas para la fecha 2025-05-29mdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.reserva_estado as estado,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                -- Información del doctor usando person_id de la tabla rh_doctors
                COALESCE(doc_person.first_name || ' ' || doc_person.last_name, 'Doctor ' || r.doctor_id) as doctor_nombre,
                -- Información del paciente directamente de rh_person
                COALESCE(pac_person.first_name || ' ' || pac_person.last_name, 'Paciente ' || r.paciente_id) as paciente_nombre,
                -- Información del servicio desde rs_servicios si existe
                COALESCE(s.nombre, 'Servicio ' || r.servicio_id) as servicio_nombre
            FROM servicios_reservas r
            -- Join para obtener información del doctor
            LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
            LEFT JOIN rh_person doc_person ON d.person_id = doc_person.person_id
            -- Join para obtener información del paciente directamente de rh_person
            LEFT JOIN rh_person pac_person ON r.paciente_id = pac_person.person_id
            -- Join para obtener información del servicio (usando rs_servicios en lugar de servicios_medicos)
            LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio_id
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42703]: Undefined column: 7 ERROR:  column s.servicio_id does not exist
LINE 30: ...      LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio...
                                                              ^
HINT:  Perhaps you meant to reference the column "r.servicio_id".AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechamdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Verificación directa - Hay 2 reservas para la fecha 2025-05-29mdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.reserva_estado as estado,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                -- Información del doctor usando person_id de la tabla rh_doctors
                COALESCE(doc_person.first_name || ' ' || doc_person.last_name, 'Doctor ' || r.doctor_id) as doctor_nombre,
                -- Información del paciente directamente de rh_person
                COALESCE(pac_person.first_name || ' ' || pac_person.last_name, 'Paciente ' || r.paciente_id) as paciente_nombre,
                -- Información del servicio desde rs_servicios si existe
                COALESCE(s.nombre, 'Servicio ' || r.servicio_id) as servicio_nombre
            FROM servicios_reservas r
            -- Join para obtener información del doctor
            LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
            LEFT JOIN rh_person doc_person ON d.person_id = doc_person.person_id
            -- Join para obtener información del paciente directamente de rh_person
            LEFT JOIN rh_person pac_person ON r.paciente_id = pac_person.person_id
            -- Join para obtener información del servicio (usando rs_servicios en lugar de servicios_medicos)
            LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio_id
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42703]: Undefined column: 7 ERROR:  column s.servicio_id does not exist
LINE 30: ...      LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio...
                                                              ^
HINT:  Perhaps you meant to reference the column "r.servicio_id".AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Verificación directa - Hay 2 reservas para la fecha 2025-05-29mdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.estado_reserva,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                COALESCE(doc_person.first_name || ' ' || doc_person.last_name, 'Doctor ' || r.doctor_id) as doctor_nombre,
                COALESCE(pac_person.first_name || ' ' || pac_person.last_name, 'Paciente ' || r.paciente_id) as paciente_nombre,
                COALESCE(s.nombre, 'Servicio ' || r.servicio_id) as servicio_nombre
            FROM servicios_reservas r
            LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
            LEFT JOIN rh_person doc_person ON d.person_id = doc_person.person_id
            LEFT JOIN rh_person pac_person ON r.paciente_id = pac_person.person_id
            LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio_id
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42703]: Undefined column: 7 ERROR:  column s.servicio_id does not exist
LINE 24: ...      LEFT JOIN rs_servicios s ON r.servicio_id = s.servicio...
                                                              ^
HINT:  Perhaps you meant to reference the column "r.servicio_id".AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Verificación directa - Hay 2 reservas para la fecha 2025-05-29mdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.estado_reserva,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                COALESCE(doc_person.first_name || ' ' || doc_person.last_name, 'Doctor ' || r.doctor_id) as doctor_nombre,
                COALESCE(pac_person.first_name || ' ' || pac_person.last_name, 'Paciente ' || r.paciente_id) as paciente_nombre,
                COALESCE(s.nombre, 'Servicio ' || r.servicio_id) as servicio_nombre
            FROM servicios_reservas r
            LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
            LEFT JOIN rh_person doc_person ON d.person_id = doc_person.person_id
            LEFT JOIN rh_person pac_person ON r.paciente_id = pac_person.person_id
            LEFT JOIN rs_servicios s ON r.servicio_id = s.id
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42703]: Undefined column: 7 ERROR:  column s.id does not exist
LINE 24:             LEFT JOIN rs_servicios s ON r.servicio_id = s.id
                                                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":2,"paciente_id":51,"fecha_reserva":"2025-05-29","hora_inicio":"08:45:00","hora_fin":"09:15:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-29","hora_inicio":"08:45:00","hora_fin":"09:15:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-29","hora_inicio":"08:45:00","hora_fin":"09:15:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":2,"doctor_id":"14","paciente_id":51,"fecha_reserva":"2025-05-29","hora_inicio":"08:45:00","hora_fin":"09:15:00","agenda_id":null,"tarifa_id":null}Reserva creada con ID: 6AJAX guardarReserva: Reserva creada con ID 6AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Verificación directa - Hay 3 reservas para la fecha 2025-05-29mdlObtenerReservasPorFecha: SQL=SELECT 
                r.reserva_id,
                r.servicio_id,
                r.doctor_id,
                r.paciente_id,
                r.fecha_reserva,
                r.hora_inicio,
                r.hora_fin,
                r.estado_reserva,
                r.observaciones,
                r.business_id,
                r.created_at,
                r.updated_at,
                r.agenda_id,
                r.sala_id,
                r.tarifa_id,
                COALESCE(doc_person.first_name || ' ' || doc_person.last_name, 'Doctor ' || r.doctor_id) as doctor_nombre,
                COALESCE(pac_person.first_name || ' ' || pac_person.last_name, 'Paciente ' || r.paciente_id) as paciente_nombre,
                COALESCE(s.nombre, 'Servicio ' || r.servicio_id) as servicio_nombre
            FROM servicios_reservas r
            LEFT JOIN rh_doctors d ON r.doctor_id = d.doctor_id
            LEFT JOIN rh_person doc_person ON d.person_id = doc_person.person_id
            LEFT JOIN rh_person pac_person ON r.paciente_id = pac_person.person_id
            LEFT JOIN rs_servicios s ON r.servicio_id = s.id
            WHERE r.fecha_reserva = :fecha ORDER BY r.hora_inicio ASCError al obtener reservas por fecha: SQLSTATE[42703]: Undefined column: 7 ERROR:  column s.id does not exist
LINE 24:             LEFT JOIN rs_servicios s ON r.servicio_id = s.id
                                                                 ^AJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 3 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 3 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":1,"paciente_id":14,"fecha_reserva":"2025-05-29","hora_inicio":"10:15:00","hora_fin":"10:45:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":1,"doctor_id":14,"paciente_id":14,"fecha_reserva":"2025-05-29","hora_inicio":"10:15:00","hora_fin":"10:45:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":1,"doctor_id":14,"paciente_id":14,"fecha_reserva":"2025-05-29","hora_inicio":"10:15:00","hora_fin":"10:45:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":1,"doctor_id":"14","paciente_id":14,"fecha_reserva":"2025-05-29","hora_inicio":"10:15:00","hora_fin":"10:45:00","agenda_id":null,"tarifa_id":null}Reserva creada con ID: 7AJAX guardarReserva: Reserva creada con ID 7AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":3,"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 22:55:03.108535","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Mary - Riquelme","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":3,"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 22:55:03.108535","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Mary - Riquelme","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":3,"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 22:55:03.108535","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Mary - Riquelme","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}mdlObtenerReservasPorFecha: Fecha=2025-05-28, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":3,"servicio_id":2,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-28","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 22:55:03.108535","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Mary - Riquelme","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-29, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":4,"servicio_id":2,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-29","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-27 23:21:30.437619","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"guido - benitez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 0 reservasAJAX obtenerReservas: Se encontraron 0 reservasAJAX obtenerReservas: No se encontraron reservas para esta fechaAJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":3,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":3,"doctor_id":"14","paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","agenda_id":null,"tarifa_id":null,"seguro_id":null}Reserva creada con ID: 8AJAX guardarReserva: Reserva creada con ID 8AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 1 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":8,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 20:53:29.908743","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Se encontraron 1 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":8,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 20:53:29.908743","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 1 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":8,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 20:53:29.908743","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Se encontraron 1 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":8,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 20:53:29.908743","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 1 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":8,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 20:53:29.908743","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Se encontraron 1 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":8,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"15:20:00","hora_fin":"15:50:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 20:53:29.908743","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":2,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":2,"doctor_id":"14","paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","agenda_id":null,"tarifa_id":null,"seguro_id":null}Reserva creada con ID: 9AJAX guardarReserva: Reserva creada con ID 9AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":1,"paciente_id":14,"fecha_reserva":"2025-05-30","hora_inicio":"14:10:00","hora_fin":"14:40:00","seguro_id":"2","observaciones":"prueba seguro"}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":1,"seguro_id":"2","paciente_id":14,"fecha_reserva":"2025-05-30","hora_inicio":"14:10:00","hora_fin":"14:40:00","observaciones":"prueba seguro","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":1,"seguro_id":"2","paciente_id":14,"fecha_reserva":"2025-05-30","hora_inicio":"14:10:00","hora_fin":"14:40:00","observaciones":"prueba seguro","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":1,"doctor_id":null,"paciente_id":14,"fecha_reserva":"2025-05-30","hora_inicio":"14:10:00","hora_fin":"14:40:00","agenda_id":null,"tarifa_id":null,"seguro_id":"2"}Reserva creada con ID: 10AJAX guardarReserva: Reserva creada con ID 10AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 2 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Se encontraron 2 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":9,"servicio_id":2,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"14:45:00","hora_fin":"15:15:00","reserva_estado":"PENDIENTE","observaciones":"","business_id":1,"created_at":"2025-05-29 21:03:52.409884","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Cirug\u00eda de cataratas por facoemulsificaci\u00f3n"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 3 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":10,"servicio_id":1,"doctor_id":14,"paciente_id":14,"fecha_reserva":"2025-05-30","hora_inicio":"14:10:00","hora_fin":"14:40:00","reserva_estado":"PENDIENTE","observaciones":"prueba seguro","business_id":1,"created_at":"2025-05-29 21:10:03.663088","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"messi - gonzalo","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 3 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":10,"servicio_id":1,"doctor_id":14,"paciente_id":14,"fecha_reserva":"2025-05-30","hora_inicio":"14:10:00","hora_fin":"14:40:00","reserva_estado":"PENDIENTE","observaciones":"prueba seguro","business_id":1,"created_at":"2025-05-29 21:10:03.663088","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"messi - gonzalo","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":1,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","seguro_id":"2","observaciones":"paciente necesita urgente "}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","observaciones":"paciente necesita urgente ","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"seguro_id":"2"}Intentando guardar reserva: {"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","observaciones":"paciente necesita urgente ","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"seguro_id":"2"}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":1,"doctor_id":"14","paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","agenda_id":null,"tarifa_id":null,"seguro_id":"2"}Reserva creada con ID: 11AJAX guardarReserva: Reserva creada con ID 11AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 4 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 4 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":1,"paciente_id":11,"fecha_reserva":"2025-05-30","hora_inicio":"13:35:00","hora_fin":"14:05:00","seguro_id":"","observaciones":""}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":1,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-30","hora_inicio":"13:35:00","hora_fin":"14:05:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}Intentando guardar reserva: {"servicio_id":1,"doctor_id":14,"paciente_id":11,"fecha_reserva":"2025-05-30","hora_inicio":"13:35:00","hora_fin":"14:05:00","observaciones":"","reserva_estado":"PENDIENTE","business_id":1,"created_by":7}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":1,"doctor_id":"14","paciente_id":11,"fecha_reserva":"2025-05-30","hora_inicio":"13:35:00","hora_fin":"14:05:00","agenda_id":null,"tarifa_id":null,"seguro_id":null}Reserva creada con ID: 12AJAX guardarReserva: Reserva creada con ID 12AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 5 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 5 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 5 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 5 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":11,"servicio_id":1,"doctor_id":14,"paciente_id":13,"fecha_reserva":"2025-05-30","hora_inicio":"13:00:00","hora_fin":"13:30:00","reserva_estado":"PENDIENTE","observaciones":"paciente necesita urgente ","business_id":1,"created_at":"2025-05-29 21:25:18.742097","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"drogba - meli","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":3,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","seguro_id":"2","observaciones":"prueba dsfsdfsdfsdfdsf"}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","observaciones":"prueba dsfsdfsdfsdfdsf","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"seguro_id":"2"}Intentando guardar reserva: {"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","observaciones":"prueba dsfsdfsdfsdfdsf","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"seguro_id":"2"}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":3,"doctor_id":"14","paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","agenda_id":null,"tarifa_id":null,"seguro_id":"2"}Reserva creada con ID: 13AJAX guardarReserva: Reserva creada con ID 13AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 6 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":13,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"prueba dsfsdfsdfsdfdsf","business_id":1,"created_at":"2025-05-29 22:21:38.211175","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Se encontraron 6 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":13,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"prueba dsfsdfsdfsdfdsf","business_id":1,"created_at":"2025-05-29 22:21:38.211175","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 6 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":13,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"prueba dsfsdfsdfsdfdsf","business_id":1,"created_at":"2025-05-29 22:21:38.211175","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX obtenerReservas: Se encontraron 6 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":13,"servicio_id":3,"doctor_id":14,"paciente_id":22,"fecha_reserva":"2025-05-30","hora_inicio":"09:30:00","hora_fin":"10:00:00","reserva_estado":"PENDIENTE","observaciones":"prueba dsfsdfsdfsdfdsf","business_id":1,"created_at":"2025-05-29 22:21:38.211175","updated_at":null,"agenda_id":null,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Carlos - Rodr\u00edguez","serv_descripcion":"Tomograf\u00eda ocular OCT"}AJAX guardarReserva: Datos recibidos = {"doctor_id":14,"servicio_id":1,"paciente_id":51,"fecha_reserva":"2025-05-30","hora_inicio":"08:00:00","hora_fin":"08:30:00","seguro_id":"2","observaciones":"dfsdfsdfsdfdsfdsfds","agenda_id":24}ctrGuardarReserva: Enviando datos al modelo: {"servicio_id":1,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-30","hora_inicio":"08:00:00","hora_fin":"08:30:00","observaciones":"dfsdfsdfsdfdsfdsfds","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"agenda_id":24,"seguro_id":"2"}Intentando guardar reserva: {"servicio_id":1,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-30","hora_inicio":"08:00:00","hora_fin":"08:30:00","observaciones":"dfsdfsdfsdfdsfdsfds","reserva_estado":"PENDIENTE","business_id":1,"created_by":7,"agenda_id":24,"seguro_id":"2"}SQL a ejecutar: INSERT INTO servicios_reservas...Parámetros: {"servicio_id":1,"doctor_id":"14","paciente_id":51,"fecha_reserva":"2025-05-30","hora_inicio":"08:00:00","hora_fin":"08:30:00","agenda_id":24,"tarifa_id":null,"seguro_id":"2"}Reserva creada con ID: 14AJAX guardarReserva: Reserva creada con ID 14AJAX obtenerReservas: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: Fecha=2025-05-30, DoctorID=null, Estado=nullmdlObtenerReservasPorFecha: SQL=SELECT 
                sr.reserva_id,
                sr.servicio_id,
                sr.doctor_id,
                sr.paciente_id,
                sr.fecha_reserva,
                sr.hora_inicio,
                sr.hora_fin,
                sr.reserva_estado,
                sr.observaciones,
                sr.business_id,
                sr.created_at,
                sr.updated_at,
                sr.agenda_id,
                sr.sala_id,
                sr.tarifa_id,
                rp.first_name ||' - ' || rp.last_name as doctor,
                rp2.first_name ||' - ' || rp2.last_name as paciente,
                rs.serv_descripcion
            FROM servicios_reservas sr 
            INNER JOIN rh_doctors rd ON sr.doctor_id = rd.doctor_id 
            INNER JOIN rh_person rp ON rd.person_id = rp.person_id 
            INNER JOIN rh_person rp2 ON sr.paciente_id = rp2.person_id 
            INNER JOIN rs_servicios rs ON sr.servicio_id = rs.serv_id 
            WHERE sr.fecha_reserva BETWEEN :fecha_inicio AND :fecha_fin ORDER BY sr.hora_inicio ASCmdlObtenerReservasPorFecha: Se encontraron 7 reservasmdlObtenerReservasPorFecha: Primera reserva: {"reserva_id":14,"servicio_id":1,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-30","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"dfsdfsdfsdfdsfdsfds","business_id":1,"created_at":"2025-05-29 22:28:24.249113","updated_at":null,"agenda_id":24,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}AJAX obtenerReservas: Se encontraron 7 reservasAJAX obtenerReservas: Primera reserva: {"reserva_id":14,"servicio_id":1,"doctor_id":14,"paciente_id":51,"fecha_reserva":"2025-05-30","hora_inicio":"08:00:00","hora_fin":"08:30:00","reserva_estado":"PENDIENTE","observaciones":"dfsdfsdfsdfdsfdsfds","business_id":1,"created_at":"2025-05-29 22:28:24.249113","updated_at":null,"agenda_id":24,"sala_id":null,"tarifa_id":null,"doctor":"ronal - ricardo","paciente":"Mary - Riquelme","serv_descripcion":"Consulta m\u00e9dica general b\u00e1sica"}