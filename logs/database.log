[2025-06-09 02:23:04] Error: PDO PostgreSQL extension not loaded[2025-06-09 02:23:04] Extensiones cargadas: Core, bcmath, calendar, ctype, date, filter, hash, iconv, json, SPL, pcre, random, readline, Reflection, session, standard, mysqlnd, tokenizer, zlib, libxml, dom, PDO, Phar, SimpleXML, xml, xmlreader, xmlwriter[2025-06-09 02:41:48] Error: PDO PostgreSQL extension not loaded[2025-06-09 02:41:48] Extensiones cargadas: Core, bcmath, calendar, ctype, date, filter, hash, iconv, json, SPL, pcre, random, readline, Reflection, session, standard, mysqlnd, tokenizer, zlib, libxml, dom, PDO, Phar, SimpleXML, xml, xmlreader, xmlwriter[2025-06-09 07:08:03] [INFO] [Model.php:175]
SQL: SELECT * FROM sys_register WHERE reg_email = :email
Parameters: {
    "email": "angel@angel.com"
}
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Model.php:175]
SQL: SELECT * FROM sys_register WHERE reg_document = :document
Parameters: {
    "document": "3654123"
}
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Model::create]
Table: sys_register
Original Data: {
    "reg_document": "3654123",
    "reg_name": "angel",
    "reg_lastname": "isnardi",
    "reg_email": "angel@angel.com",
    "reg_phone": "0982313359",
    "reg_bdate": "1995-02-02",
    "reg_activation": "0f49aa894ff9af908cd39f07f0ae8504"
}
Filtered Data: {
    "reg_document": "3654123",
    "reg_name": "angel",
    "reg_lastname": "isnardi",
    "reg_email": "angel@angel.com",
    "reg_phone": "0982313359",
    "reg_bdate": "1995-02-02",
    "reg_activation": "0f49aa894ff9af908cd39f07f0ae8504"
}
Excluded Data: []
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Model.php:110]
SQL: INSERT INTO sys_register (reg_document, reg_name, reg_lastname, reg_email, reg_phone, reg_bdate, reg_activation) VALUES (:reg_document, :reg_name, :reg_lastname, :reg_email, :reg_phone, :reg_bdate, :reg_activation)
Parameters: {
    "reg_document": "3654123",
    "reg_name": "angel",
    "reg_lastname": "isnardi",
    "reg_email": "angel@angel.com",
    "reg_phone": "0982313359",
    "reg_bdate": "1995-02-02",
    "reg_activation": "0f49aa894ff9af908cd39f07f0ae8504"
}
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Database.php:255]
SQL: INSERT INTO sys_register (reg_document, reg_name, reg_lastname, reg_email, reg_phone, reg_bdate, reg_activation) VALUES (:reg_document, :reg_name, :reg_lastname, :reg_email, :reg_phone, :reg_bdate, :reg_activation)
Parameters: {
    "reg_document": "3654123",
    "reg_name": "angel",
    "reg_lastname": "isnardi",
    "reg_email": "angel@angel.com",
    "reg_phone": "0982313359",
    "reg_bdate": "1995-02-02",
    "reg_activation": "0f49aa894ff9af908cd39f07f0ae8504"
}
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Database.php:231]
SQL: SELECT * FROM sys_register WHERE reg_id = :id
Parameters: {
    "id": "9"
}
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Model.php:175]
SQL: SELECT * FROM sys_users WHERE reg_id = :reg_id
Parameters: {
    "reg_id": "9"
}
----------------------------------------
[2025-06-09 07:08:03] [INFO] [Model.php:175]
SQL: INSERT INTO sys_user_roles (user_id, role_id) VALUES (:userId, :roleId)
Parameters: {
    "userId": 9,
    "roleId": 2
}
----------------------------------------
[2025-06-09 07:08:07] [INFO] [Model.php:143]
SQL: UPDATE sys_users SET user_is_active = :user_is_active WHERE user_id = :id
Parameters: {
    "user_is_active": true,
    "id": 9
}
----------------------------------------
[2025-06-09 07:08:07] [INFO] [Database.php:281]
SQL: UPDATE sys_users SET user_is_active = :user_is_active WHERE user_id = :id
Parameters: {
    "user_is_active": true,
    "id": 9
}
----------------------------------------
[2025-06-09 11:16:32] Verificando perfil completo para usuario ID: 9[2025-06-09 11:16:32] Perfil incompleto: No existe vinculación en person_system_user para user_id 9[2025-06-09 11:17:19] Verificando perfil completo para usuario ID: 9[2025-06-09 11:17:19] Vinculación encontrada en person_system_user para user_id 9[2025-06-09 11:17:19] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":null,"address":"asuncion","email":"angel@angel.com","department_id":null,"city_id":null,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":null,"last_accessed_at":null,"owner_id":null,"is_active":false,"business_id":null,"profile_photo":null}[2025-06-09 11:17:19] Perfil COMPLETO para user_id 9[2025-06-09 07:17:34] [INFO] [Database.php:219]
SQL: SELECT * FROM especialidades WHERE activo = :value
Parameters: {
    "value": true
}
----------------------------------------
[2025-06-09 07:17:35] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person ORDER BY person_id DESC LIMIT :limit OFFSET :offset
Parameters: {
    "limit": 10,
    "offset": 0
}
----------------------------------------
[2025-06-09 07:17:35] [INFO] [Model.php:175]
SQL: SELECT COUNT(*) as total FROM rh_person
----------------------------------------
[2025-06-09 07:17:42] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:18:02] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "44"
}
----------------------------------------
[2025-06-09 07:18:02] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "44"
}
----------------------------------------
[2025-06-09 07:18:02] [INFO] [Model.php:143]
SQL: UPDATE rh_person SET is_active = :is_active, last_modified_at = :last_modified_at WHERE person_id = :id
Parameters: {
    "is_active": false,
    "last_modified_at": "2025-06-09 07:18:02",
    "id": "44"
}
----------------------------------------
[2025-06-09 07:18:02] [INFO] [Database.php:281]
SQL: UPDATE rh_person SET is_active = :is_active, last_modified_at = :last_modified_at WHERE person_id = :id
Parameters: {
    "is_active": false,
    "last_modified_at": "2025-06-09 07:18:02",
    "id": "44"
}
----------------------------------------
[2025-06-09 07:18:02] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "44"
}
----------------------------------------
[2025-06-09 07:18:02] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:18:05] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:05] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:05] [INFO] [Model.php:143]
SQL: UPDATE rh_person SET is_active = :is_active, last_modified_at = :last_modified_at WHERE person_id = :id
Parameters: {
    "is_active": true,
    "last_modified_at": "2025-06-09 07:18:05",
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:05] [INFO] [Database.php:281]
SQL: UPDATE rh_person SET is_active = :is_active, last_modified_at = :last_modified_at WHERE person_id = :id
Parameters: {
    "is_active": true,
    "last_modified_at": "2025-06-09 07:18:05",
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:05] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:05] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:18:07] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:07] [INFO] [Model.php:175]
SQL: SELECT e.* FROM especialidades e INNER JOIN persona_especialidad pe ON e.especialidad_id = pe.especialidad_id WHERE pe.persona_id = :persona_id AND e.activo = true
Parameters: {
    "persona_id": "58"
}
----------------------------------------
[2025-06-09 07:18:25] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:25] [INFO] [Model.php:143]
SQL: UPDATE rh_person SET document_number = :document_number, birth_date = :birth_date, first_name = :first_name, last_name = :last_name, phone_number = :phone_number, gender = :gender, record_number = :record_number, address = :address, email = :email, department_id = :department_id, city_id = :city_id, is_minor = :is_minor, guardian_name = :guardian_name, guardian_document = :guardian_document, last_modified_at = :last_modified_at WHERE person_id = :id
Parameters: {
    "document_number": "3654123",
    "birth_date": "1995-06-04",
    "first_name": "angel",
    "last_name": "isnardi",
    "phone_number": "0982313359",
    "gender": "M",
    "record_number": "7985465123",
    "address": "asuncion",
    "email": "angel@angel.com",
    "department_id": 2,
    "city_id": 2,
    "is_minor": false,
    "guardian_name": null,
    "guardian_document": null,
    "last_modified_at": "2025-06-09 07:18:25",
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:25] [INFO] [Database.php:281]
SQL: UPDATE rh_person SET document_number = :document_number, birth_date = :birth_date, first_name = :first_name, last_name = :last_name, phone_number = :phone_number, gender = :gender, record_number = :record_number, address = :address, email = :email, department_id = :department_id, city_id = :city_id, is_minor = :is_minor, guardian_name = :guardian_name, guardian_document = :guardian_document, last_modified_at = :last_modified_at WHERE person_id = :id
Parameters: {
    "document_number": "3654123",
    "birth_date": "1995-06-04",
    "first_name": "angel",
    "last_name": "isnardi",
    "phone_number": "0982313359",
    "gender": "M",
    "record_number": "7985465123",
    "address": "asuncion",
    "email": "angel@angel.com",
    "department_id": 2,
    "city_id": 2,
    "is_minor": false,
    "guardian_name": null,
    "guardian_document": null,
    "last_modified_at": "2025-06-09 07:18:25",
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:25] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:18:25] [INFO] [Model.php:175]
SQL: DELETE FROM persona_especialidad WHERE persona_id = :persona_id
Parameters: {
    "persona_id": "58"
}
----------------------------------------
[2025-06-09 07:18:25] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:19:33] [INFO] [Database.php:219]
SQL: SELECT * FROM especialidades WHERE activo = :value
Parameters: {
    "value": true
}
----------------------------------------
[2025-06-09 07:19:33] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person ORDER BY person_id DESC LIMIT :limit OFFSET :offset
Parameters: {
    "limit": 10,
    "offset": 0
}
----------------------------------------
[2025-06-09 07:19:33] [INFO] [Model.php:175]
SQL: SELECT COUNT(*) as total FROM rh_person
----------------------------------------
[2025-06-09 07:19:36] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:23:49] [INFO] [Database.php:219]
SQL: SELECT * FROM especialidades WHERE activo = :value
Parameters: {
    "value": true
}
----------------------------------------
[2025-06-09 07:23:49] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person ORDER BY person_id DESC LIMIT :limit OFFSET :offset
Parameters: {
    "limit": 10,
    "offset": 0
}
----------------------------------------
[2025-06-09 07:23:49] [INFO] [Model.php:175]
SQL: SELECT COUNT(*) as total FROM rh_person
----------------------------------------
[2025-06-09 07:23:53] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:23:58] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:23:58] [INFO] [Model.php:175]
SQL: SELECT e.* FROM especialidades e INNER JOIN persona_especialidad pe ON e.especialidad_id = pe.especialidad_id WHERE pe.persona_id = :persona_id AND e.activo = true
Parameters: {
    "persona_id": "58"
}
----------------------------------------
[2025-06-09 07:23:58] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:24:38] [INFO] [Model.php:175]
SQL: DELETE FROM persona_especialidad WHERE persona_id = :persona_id
Parameters: {
    "persona_id": "58"
}
----------------------------------------
[2025-06-09 07:24:38] [INFO] [Model.php:175]
SQL: INSERT INTO persona_especialidad (persona_id, especialidad_id) VALUES (:persona_id, :especialidad_id)
Parameters: {
    "persona_id": "58",
    "especialidad_id": "2"
}
----------------------------------------
[2025-06-09 07:24:38] [INFO] [Model.php:175]
SQL: INSERT INTO persona_especialidad (persona_id, especialidad_id) VALUES (:persona_id, :especialidad_id)
Parameters: {
    "persona_id": "58",
    "especialidad_id": "3"
}
----------------------------------------
[2025-06-09 07:24:38] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:24:38] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person WHERE first_name ILIKE :name ORDER BY person_id DESC
Parameters: {
    "name": "%angel%"
}
----------------------------------------
[2025-06-09 07:24:44] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:24:44] [INFO] [Model.php:175]
SQL: SELECT e.* FROM especialidades e INNER JOIN persona_especialidad pe ON e.especialidad_id = pe.especialidad_id WHERE pe.persona_id = :persona_id AND e.activo = true
Parameters: {
    "persona_id": "58"
}
----------------------------------------
[2025-06-09 07:24:45] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:24:45] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 07:24:48] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "58"
}
----------------------------------------
[2025-06-09 22:31:40] Verificando perfil completo para usuario ID: 9[2025-06-09 22:31:40] Vinculación encontrada en person_system_user para user_id 9[2025-06-09 22:31:40] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":"7985465123","address":"asuncion","email":"angel@angel.com","department_id":2,"city_id":2,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":"2025-06-09 07:18:25-04","last_accessed_at":null,"owner_id":null,"is_active":true,"business_id":null,"profile_photo":null}[2025-06-09 22:31:40] Perfil COMPLETO para user_id 9[2025-06-09 22:31:40] Verificando perfil completo para usuario ID: 9[2025-06-09 22:31:40] Vinculación encontrada en person_system_user para user_id 9[2025-06-09 22:31:40] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":"7985465123","address":"asuncion","email":"angel@angel.com","department_id":2,"city_id":2,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":"2025-06-09 07:18:25-04","last_accessed_at":null,"owner_id":null,"is_active":true,"business_id":null,"profile_photo":null}[2025-06-09 22:31:40] Perfil COMPLETO para user_id 9DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-10, Número día: 2, Texto día: MARTESBuscando médicos para fecha: 2025-06-10, día: MARTESAgendas encontradas para MARTES: [{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":10,"dia_semana":"MARTES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MARTES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MARTES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MARTES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MARTES"}]Médicos encontrados para 2025-06-10 (MARTES): 2DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1[2025-06-11 22:49:47] Verificando perfil completo para usuario ID: 9[2025-06-11 22:49:47] Vinculación encontrada en person_system_user para user_id 9[2025-06-11 22:49:48] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":"7985465123","address":"asuncion","email":"angel@angel.com","department_id":2,"city_id":2,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":"2025-06-09 07:18:25-04","last_accessed_at":null,"owner_id":null,"is_active":true,"business_id":null,"profile_photo":null}[2025-06-11 22:49:48] Perfil COMPLETO para user_id 9[2025-06-11 22:49:48] Verificando perfil completo para usuario ID: 9[2025-06-11 22:49:48] Vinculación encontrada en person_system_user para user_id 9[2025-06-11 22:49:48] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":"7985465123","address":"asuncion","email":"angel@angel.com","department_id":2,"city_id":2,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":"2025-06-09 07:18:25-04","last_accessed_at":null,"owner_id":null,"is_active":true,"business_id":null,"profile_photo":null}[2025-06-11 22:49:48] Perfil COMPLETO para user_id 9DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1{"agenda_id":"18","turno_id":"1","sala_id":"1","dia_semana":"JUEVES","hora_inicio":"14:00","hora_fin":"18:00","intervalo_minutos":"15","cupo_maximo":"1","detalle_estado":true}{"agenda_id":"18","turno_id":"3","sala_id":"1","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":"15","cupo_maximo":"1","detalle_estado":true}DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-13, Número día: 5, Texto día: VIERNESBuscando médicos para fecha: 2025-06-13, día: VIERNESAgendas encontradas para VIERNES: [{"agenda_id":10,"dia_semana":"VIERNES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"VIERNES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"VIERNES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'VIERNES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"VIERNES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"VIERNES"}]Médicos encontrados para 2025-06-13 (VIERNES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}DEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}Generando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosGenerando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSe generaron 21 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}Generando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosGenerando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSe generaron 21 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}Generando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosGenerando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSe generaron 21 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2mdlObtenerHorariosDisponibles: SQL para DoctorID=13, Dia=MIERCOLES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=13, Dia=MIERCOLESPrimer resultado: {"horario_id":28,"agenda_id":28,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"MIERCOLES","hora_inicio":"23:00:00","hora_fin":"23:59:00","intervalo_minutos":15,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 13 en fecha 2025-06-11Verificando reservas existentes para DoctorID=13, Fecha=2025-06-11: 0 encontradasGenerando slots para horario: {"horario_id":28,"agenda_id":28,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"MIERCOLES","hora_inicio":"23:00:00","hora_fin":"23:59:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSe generaron 3 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=MIERCOLES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=14, Dia=MIERCOLESPrimer resultado: {"horario_id":19,"agenda_id":19,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"MIERCOLES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":30,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 14 en fecha 2025-06-11Verificando reservas existentes para DoctorID=14, Fecha=2025-06-11: 0 encontradasGenerando slots para horario: {"horario_id":19,"agenda_id":19,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"MIERCOLES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":30,"cupo_maximo":1}, Intervalo: 30 minutosSe generaron 8 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=MIERCOLES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=14, Dia=MIERCOLESPrimer resultado: {"horario_id":19,"agenda_id":19,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"MIERCOLES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":30,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 14 en fecha 2025-06-11Verificando reservas existentes para DoctorID=14, Fecha=2025-06-11: 0 encontradasGenerando slots para horario: {"horario_id":19,"agenda_id":19,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"MIERCOLES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":30,"cupo_maximo":1}, Intervalo: 30 minutosSe generaron 8 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=13, Dia=MIERCOLES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=13, Dia=MIERCOLESPrimer resultado: {"horario_id":28,"agenda_id":28,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"MIERCOLES","hora_inicio":"23:00:00","hora_fin":"23:59:00","intervalo_minutos":15,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 13 en fecha 2025-06-11Verificando reservas existentes para DoctorID=13, Fecha=2025-06-11: 0 encontradasGenerando slots para horario: {"horario_id":28,"agenda_id":28,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"MIERCOLES","hora_inicio":"23:00:00","hora_fin":"23:59:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSe generaron 3 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=MIERCOLES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=14, Dia=MIERCOLESPrimer resultado: {"horario_id":19,"agenda_id":19,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"MIERCOLES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":30,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 14 en fecha 2025-06-11Verificando reservas existentes para DoctorID=14, Fecha=2025-06-11: 0 encontradasGenerando slots para horario: {"horario_id":19,"agenda_id":19,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"MIERCOLES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":30,"cupo_maximo":1}, Intervalo: 30 minutosSe generaron 8 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-11, Número día: 3, Texto día: MIERCOLESBuscando médicos para fecha: 2025-06-11, día: MIERCOLESAgendas encontradas para MIERCOLES: [{"agenda_id":10,"dia_semana":"MIERCOLES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"MIERCOLES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'MIERCOLES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"MIERCOLES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"MIERCOLES"}]Médicos encontrados para 2025-06-11 (MIERCOLES): 2DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 4 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 4 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 16 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-13, Número día: 5, Texto día: VIERNESBuscando médicos para fecha: 2025-06-13, día: VIERNESAgendas encontradas para VIERNES: [{"agenda_id":10,"dia_semana":"VIERNES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"VIERNES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"VIERNES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'VIERNES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"VIERNES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"VIERNES"}]Médicos encontrados para 2025-06-13 (VIERNES): 2DEBUG - Fecha: 2025-06-13, Número día: 5, Texto día: VIERNESBuscando médicos para fecha: 2025-06-13, día: VIERNESAgendas encontradas para VIERNES: [{"agenda_id":10,"dia_semana":"VIERNES","agenda_descripcion":"Agenda del m\u00e9dico ID: 13","medico_id":13},{"agenda_id":18,"dia_semana":"VIERNES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"VIERNES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'VIERNES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":13,"person_id":53,"nombre_doctor":"Antonio Galeano","doctor_estado":"ACTIVO","agenda_id":10,"medico_id":13,"doctor_match":true,"dia_semana":"VIERNES"},{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"VIERNES"}]Médicos encontrados para 2025-06-13 (VIERNES): 2mdlObtenerHorariosDisponibles: SQL para DoctorID=13, Dia=VIERNES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=13, Dia=VIERNESPrimer resultado: {"horario_id":25,"agenda_id":25,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"VIERNES","hora_inicio":"17:00:00","hora_fin":"20:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 13 en fecha 2025-06-13Verificando reservas existentes para DoctorID=13, Fecha=2025-06-13: 0 encontradasGenerando slots para horario: {"horario_id":25,"agenda_id":25,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"VIERNES","hora_inicio":"17:00:00","hora_fin":"20:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSe generaron 4 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=13, Dia=VIERNES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 1 resultados para DoctorID=13, Dia=VIERNESPrimer resultado: {"horario_id":25,"agenda_id":25,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"VIERNES","hora_inicio":"17:00:00","hora_fin":"20:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 0 reservas para doctor ID 13 en fecha 2025-06-13Verificando reservas existentes para DoctorID=13, Fecha=2025-06-13: 0 encontradasGenerando slots para horario: {"horario_id":25,"agenda_id":25,"cabecera_agenda_id":10,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":13,"nombre_doctor":"Antonio Galeano","dia_semana":"VIERNES","hora_inicio":"17:00:00","hora_fin":"20:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSe generaron 4 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 5 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 5 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 15 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 5 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 5 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 15 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true AND ac.servicio_id = :servicio_id ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 5 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 5 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 15 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true AND ac.servicio_id = :servicio_id ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 5 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 5 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 15 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true AND ac.servicio_id = :servicio_id ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 6 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 6 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Se generaron 14 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 7 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 7 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Se generaron 13 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 7 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 7 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Se generaron 13 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true AND ac.servicio_id = :servicio_id ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 7 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 7 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Se generaron 13 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 7 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 7 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Se generaron 13 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 7 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 7 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Se generaron 13 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true AND ac.servicio_id = :servicio_id ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 7 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 7 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Se generaron 13 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true AND ac.servicio_id = :servicio_id ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 8 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 8 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 12 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 9 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 9 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:15:00 - 17:30:00 excluido por reserva existente: 17:15:00 - 17:30:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 11 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 9 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 9 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:15:00 - 17:30:00 excluido por reserva existente: 17:15:00 - 17:30:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 11 slots detalladosDEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1[2025-06-12 06:39:35] [INFO] [Database.php:219]
SQL: SELECT * FROM especialidades WHERE activo = :value
Parameters: {
    "value": true
}
----------------------------------------
[2025-06-12 06:39:35] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person ORDER BY person_id DESC LIMIT :limit OFFSET :offset
Parameters: {
    "limit": 10,
    "offset": 0
}
----------------------------------------
[2025-06-12 06:39:35] [INFO] [Model.php:175]
SQL: SELECT COUNT(*) as total FROM rh_person
----------------------------------------
[2025-06-12 06:39:37] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "46"
}
----------------------------------------
[2025-06-12 06:39:37] [INFO] [Model.php:175]
SQL: SELECT e.* FROM especialidades e INNER JOIN persona_especialidad pe ON e.especialidad_id = pe.especialidad_id WHERE pe.persona_id = :persona_id AND e.activo = true
Parameters: {
    "persona_id": "46"
}
----------------------------------------
DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1[2025-06-12 07:06:55] [INFO] [Database.php:219]
SQL: SELECT * FROM especialidades WHERE activo = :value
Parameters: {
    "value": true
}
----------------------------------------
[2025-06-12 07:06:56] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person ORDER BY person_id DESC LIMIT :limit OFFSET :offset
Parameters: {
    "limit": 10,
    "offset": 0
}
----------------------------------------
[2025-06-12 07:06:56] [INFO] [Model.php:175]
SQL: SELECT COUNT(*) as total FROM rh_person
----------------------------------------
[2025-06-12 07:06:57] [INFO] [Database.php:231]
SQL: SELECT * FROM rh_person WHERE person_id = :id
Parameters: {
    "id": "46"
}
----------------------------------------
[2025-06-12 07:06:57] [INFO] [Model.php:175]
SQL: SELECT e.* FROM especialidades e INNER JOIN persona_especialidad pe ON e.especialidad_id = pe.especialidad_id WHERE pe.persona_id = :persona_id AND e.activo = true
Parameters: {
    "persona_id": "46"
}
----------------------------------------
[2025-06-12 07:11:16] [INFO] [Database.php:219]
SQL: SELECT * FROM especialidades WHERE activo = :value
Parameters: {
    "value": true
}
----------------------------------------
[2025-06-12 07:11:17] [INFO] [Model.php:175]
SQL: SELECT * FROM rh_person ORDER BY person_id DESC LIMIT :limit OFFSET :offset
Parameters: {
    "limit": 10,
    "offset": 0
}
----------------------------------------
[2025-06-12 07:11:17] [INFO] [Model.php:175]
SQL: SELECT COUNT(*) as total FROM rh_person
----------------------------------------
DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 9 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 9 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:15:00 - 17:30:00 excluido por reserva existente: 17:15:00 - 17:30:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 11 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 9 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 9 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:15:00 - 17:30:00 excluido por reserva existente: 17:15:00 - 17:30:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 11 slots detallados[2025-06-12 22:39:20] Verificando perfil completo para usuario ID: 9[2025-06-12 22:39:20] Vinculación encontrada en person_system_user para user_id 9[2025-06-12 22:39:20] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":"7985465123","address":"asuncion","email":"angel@angel.com","department_id":2,"city_id":2,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":"2025-06-09 07:18:25-04","last_accessed_at":null,"owner_id":null,"is_active":true,"business_id":null,"profile_photo":null}[2025-06-12 22:39:20] Perfil COMPLETO para user_id 9[2025-06-12 22:39:20] Verificando perfil completo para usuario ID: 9[2025-06-12 22:39:20] Vinculación encontrada en person_system_user para user_id 9[2025-06-12 22:39:20] Datos de persona encontrados para user_id 9: {"person_id":58,"document_number":"3654123","birth_date":"1995-06-04","first_name":"angel","last_name":"isnardi","phone_number":"0982313359","gender":"M","record_number":"7985465123","address":"asuncion","email":"angel@angel.com","department_id":2,"city_id":2,"is_minor":false,"guardian_name":null,"guardian_document":null,"created_at":"2025-06-09 07:17:19.294402-04","registered_by":null,"modified_by":null,"last_modified_at":"2025-06-09 07:18:25-04","last_accessed_at":null,"owner_id":null,"is_active":true,"business_id":null,"profile_photo":null}[2025-06-12 22:39:20] Perfil COMPLETO para user_id 9DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1DEBUG - Fecha: 2025-06-12, Número día: 4, Texto día: JUEVESBuscando médicos para fecha: 2025-06-12, día: JUEVESAgendas encontradas para JUEVES: [{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14},{"agenda_id":18,"dia_semana":"JUEVES","agenda_descripcion":"prueba ","medico_id":14}]DEBUG - Dia semana utilizado para la consulta: 'JUEVES'DEBUG - Días disponibles en agendas_detalle: ["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"]Resultados crudos de la consulta: [{"doctor_id":14,"person_id":56,"nombre_doctor":"ronal ricardo","doctor_estado":"ACTIVO","agenda_id":18,"medico_id":14,"doctor_match":true,"dia_semana":"JUEVES"}]Médicos encontrados para 2025-06-12 (JUEVES): 1mdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 9 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 9 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:15:00 - 17:30:00 excluido por reserva existente: 17:15:00 - 17:30:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 11 slots detalladosmdlObtenerHorariosDisponibles: SQL para DoctorID=14, Dia=JUEVES: SELECT 
                ad.detalle_id as horario_id,
                ad.detalle_id as agenda_id,
                ac.agenda_id as cabecera_agenda_id,
                ad.turno_id,
                t.turno_nombre,
                ad.sala_id,
                s.sala_nombre,
                ac.medico_id as doctor_id,
                coalesce(p.first_name, '') || ' ' || coalesce(p.last_name, '') as nombre_doctor,
                ad.dia_semana,
                ad.hora_inicio,
                ad.hora_fin,
                ad.intervalo_minutos,
                ad.cupo_maximo
            FROM
                agendas_detalle ad
            INNER JOIN 
                agendas_cabecera ac ON ad.agenda_id = ac.agenda_id
            INNER JOIN 
                turnos t ON ad.turno_id = t.turno_id
            INNER JOIN 
                salas s ON ad.sala_id = s.sala_id
            INNER JOIN
                rh_doctors rd ON rd.doctor_id = ac.medico_id 
            INNER JOIN 
                rh_person p ON p.person_id = rd.person_id
            WHERE
                ac.medico_id = :doctor_id
                AND ad.dia_semana = :dia_semana
                AND ad.detalle_estado = true
                AND ac.agenda_estado = true ORDER BY ad.hora_inicio ASCmdlObtenerHorariosDisponibles: Se encontraron 2 resultados para DoctorID=14, Dia=JUEVESPrimer resultado: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}mdlObtenerReservasExistentes: Encontradas 9 reservas para doctor ID 14 en fecha 2025-06-12Primera reserva: {"reserva_id":21,"servicio_id":2,"agenda_id":null,"doctor_id":14,"fecha_reserva":"2025-06-12","hora_inicio":"08:00:00","hora_fin":"08:30:00"}Verificando reservas existentes para DoctorID=14, Fecha=2025-06-12: 9 encontradasGenerando slots para horario: {"horario_id":22,"agenda_id":22,"cabecera_agenda_id":18,"turno_id":1,"turno_nombre":"MA\u00d1ANA","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"08:00:00","hora_fin":"12:00:00","intervalo_minutos":45,"cupo_maximo":1}, Intervalo: 45 minutosSlot 08:00:00 - 08:45:00 excluido por reserva existente: 08:00:00 - 08:30:00Slot 08:45:00 - 09:30:00 excluido por reserva existente: 09:00:00 - 09:30:00Slot 09:30:00 - 10:15:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 10:15:00 - 11:00:00 excluido por reserva existente: 10:00:00 - 10:30:00Slot 11:00:00 - 11:45:00 excluido por reserva existente: 11:00:00 - 11:45:00Generando slots para horario: {"horario_id":29,"agenda_id":29,"cabecera_agenda_id":18,"turno_id":3,"turno_nombre":"TARDE","sala_id":1,"sala_nombre":"Sala 1","doctor_id":14,"nombre_doctor":"ronal ricardo","dia_semana":"JUEVES","hora_inicio":"14:00:00","hora_fin":"18:00:00","intervalo_minutos":15,"cupo_maximo":1}, Intervalo: 15 minutosSlot 14:15:00 - 14:30:00 excluido por reserva existente: 14:15:00 - 14:30:00Slot 17:00:00 - 17:15:00 excluido por reserva existente: 17:00:00 - 17:15:00Slot 17:15:00 - 17:30:00 excluido por reserva existente: 17:15:00 - 17:30:00Slot 17:30:00 - 17:45:00 excluido por reserva existente: 17:30:00 - 17:45:00Slot 17:45:00 - 18:00:00 excluido por reserva existente: 17:45:00 - 18:00:00Se generaron 11 slots detallados